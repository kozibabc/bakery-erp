# üç∞ Bakery ERP v4.2 PATCH - Installation Guide

## üìã –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –ø–∞—Ç—á v4.2

### ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
- **–¢–∏–ø—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
  - `RAW` - –°—ã—Ä—å—ë (–º—É–∫–∞, —Å–∞—Ö–∞—Ä, –º–∞—Å–ª–æ)
  - `SEMI_OWN` - –ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç —Å–≤–æ–π (—Ç–µ—Å—Ç–æ, –∫—Ä–µ–º) ‚Üí —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Ä–µ—Ü–µ–ø—Ç
  - `SEMI_BOUGHT` - –ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç –ø–æ–∫—É–ø–Ω–æ–π (—Å–≥—É—â—ë–Ω–∫–∞ –≥–æ—Ç–æ–≤–∞—è)
  - `PACK` - –£–ø–∞–∫–æ–≤–∫–∞ (–∫–æ—Ä–æ–±–∫–∞, –ø–ª—ë–Ω–∫–∞)

### ‚úÖ **–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã**
- –†–µ—Ü–µ–ø—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ä–µ—Ü–µ–ø—Ç –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ –≤—Å–µ–º —É—Ä–æ–≤–Ω—è–º
- –†–µ—Ü–µ–ø—Ç = –Ω–æ—Ä–º–∞ –Ω–∞ 1 –∫–≥ –≤—ã—Ö–æ–¥–∞

### ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å**
```javascript
–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ—Ü–µ–ø—Ç–∞ (1 –∫–≥) = Œ£ (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç √ó —Ü–µ–Ω–∞)
  –≥–¥–µ —Ü–µ–Ω–∞:
    - –¥–ª—è RAW/PACK ‚Üí —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ —Å–æ —Å–∫–ª–∞–¥–∞
    - –¥–ª—è SEMI_OWN ‚Üí —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –µ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞ (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ)
```

### ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤**
```javascript
–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ—Ä–æ–±–∫–∏ = 
  (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ—Ü–µ–ø—Ç–∞ √ó –≤–µ—Å –∫–æ—Ä–æ–±–∫–∏) √ó 
  (1 + laborCost% + overhead%)

–¶–µ–Ω–∞ –æ–ø—Ç = —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å √ó (1 + wholesaleMarkup%)
–¶–µ–Ω–∞ —Ä–æ–∑–Ω1 = —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å √ó (1 + retail1Markup%)
–¶–µ–Ω–∞ —Ä–æ–∑–Ω2 = —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å √ó (1 + retail2Markup%)
```

### ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã**
- –ù–∞—Ü–µ–Ω–∫–∏ (–æ–ø—Ç/—Ä–æ–∑–Ω1/—Ä–æ–∑–Ω2)
- –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (—Ç—Ä—É–¥, –ø—Ä–æ—á–∏–µ)
- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏

### ‚úÖ **PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** (–≥–æ—Ç–æ–≤–∏—Ç—Å—è)
- –ü—Ä–∞–π—Å-–ª–∏—Å—Ç—ã (–æ–ø—Ç/—Ä–æ–∑–Ω–∏—Ü–∞)
- –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –ª–∏—Å—Ç—ã

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ç—á–∞ v4.2

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# 1. –°–∫–∞—á–∞–π—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –ø–∞—Ç—á–∞
chmod +x patch-v4.2-*.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ç—á
./patch-v4.2-master.sh

# 3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down
docker compose up -d --build

# 4. –û—Ç–∫—Ä–æ–π—Ç–µ
http://localhost
```

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞**

```bash
# 1. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ part1 (–º–æ–¥–µ–ª–∏ + —Ä–∞—Å—á—ë—Ç—ã)
./patch-v4.2-part1.sh

# 2. –û–±–Ω–æ–≤–∏—Ç–µ package.json
# (—É–∂–µ –≤ —Å–∫—Ä–∏–ø—Ç–µ)

# 3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ
docker compose down
docker compose up -d --build
```

---

## üìä –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### **1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Ç–∏–ø–∞–º–∏**

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ —Å—ã—Ä—å—è
POST /api/components
{
  "name": "–ú—É–∫–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è",
  "type": "RAW",
  "unit": "–∫–≥"
}

// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç–∞ (—Ç–µ—Å—Ç–æ)
POST /api/components
{
  "name": "–¢–µ—Å—Ç–æ –ø–µ—Å–æ—á–Ω–æ–µ",
  "type": "SEMI_OWN",
  "unit": "–∫–≥",
  "linkedRecipeId": 5  // ID —Ä–µ—Ü–µ–ø—Ç–∞ —Ç–µ—Å—Ç–∞
}
```

### **2. –†–µ—Ü–µ–ø—Ç—ã —Å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é**

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ "–ü–µ—Å–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–æ" (–Ω–∞ 1 –∫–≥)
POST /api/recipes
{
  "name": "–ü–µ—Å–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–æ",
  "outputWeight": 1.000,
  "items": [
    { "componentId": 1, "weight": 0.600, "stage": "–æ—Å–Ω–æ–≤–∞" }, // –ú—É–∫–∞ 600–≥
    { "componentId": 2, "weight": 0.200, "stage": "–æ—Å–Ω–æ–≤–∞" }, // –°–∞—Ö–∞—Ä 200–≥
    { "componentId": 3, "weight": 0.200, "stage": "–æ—Å–Ω–æ–≤–∞" }  // –ú–∞—Å–ª–æ 200–≥
  ]
}

// –û—Ç–≤–µ—Ç –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
{
  "id": 5,
  "name": "–ü–µ—Å–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–æ",
  "outputWeight": 1.000,
  "calculatedCost": 48.50  // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ!
}
```

### **3. –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã**

```javascript
// –†–µ—Ü–µ–ø—Ç "–ü–µ—á–µ–Ω—å–µ –†–æ–º–∞—à–∫–∞" –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ—Å—Ç–æ
POST /api/recipes
{
  "name": "–ü–µ—á–µ–Ω—å–µ –†–æ–º–∞—à–∫–∞",
  "outputWeight": 1.000,
  "items": [
    { "componentId": 10, "weight": 0.800 }, // –¢–µ—Å—Ç–æ –ø–µ—Å–æ—á–Ω–æ–µ (SEMI_OWN)
    { "componentId": 4, "weight": 0.150 },  // –ü–æ–≤–∏–¥–ª–æ
    { "componentId": 5, "weight": 0.050 }   // –ì–ª–∞–∑—É—Ä—å
  ]
}

// –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
// 1. –ù–∞—Ö–æ–¥–∏—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å "–¢–µ—Å—Ç–æ –ø–µ—Å–æ—á–Ω–æ–µ" = 48.50 –≥—Ä–Ω/–∫–≥
// 2. –°—á–∏—Ç–∞–µ—Ç: 0.8√ó48.50 + 0.15√ó—Ü–µ–Ω–∞_–ø–æ–≤–∏–¥–ª–∞ + 0.05√ó—Ü–µ–Ω–∞_–≥–ª–∞–∑—É—Ä–∏
// 3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ calculatedCost
```

### **4. –¢–æ–≤–∞—Ä—ã —Å –∞–≤—Ç–æ—Ü–µ–Ω–∞–º–∏**

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
POST /api/products
{
  "name": "–†–æ–º–∞—à–∫–∞ 2.5 –∫–≥",
  "recipeId": 8,  // –†–µ—Ü–µ–ø—Ç "–ü–µ—á–µ–Ω—å–µ –†–æ–º–∞—à–∫–∞"
  "boxNetWeight": 2.500,
  "boxGrossWeight": 2.700
}

// –û—Ç–≤–µ—Ç (—Ü–µ–Ω—ã —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!):
{
  "id": 15,
  "name": "–†–æ–º–∞—à–∫–∞ 2.5 –∫–≥",
  "recipeId": 8,
  "boxNetWeight": 2.500,
  "calculatedCost": 165.00,    // –∞–≤—Ç–æ: (65√ó2.5)√ó1.15
  "wholesalePrice": 181.50,     // –∞–≤—Ç–æ: 165√ó1.10
  "retail1Price": 231.00,       // –∞–≤—Ç–æ: 165√ó1.40
  "retail2Price": 280.50        // –∞–≤—Ç–æ: 165√ó1.70
}
```

### **5. –ü–µ—Ä–µ—Å—á—ë—Ç —Ü–µ–Ω**

```javascript
// –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Ü–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
POST /api/products/15/recalculate

// –û—Ç–≤–µ—Ç:
{
  "baseCost": 170.00,
  "wholesalePrice": 187.00,
  "retail1Price": 238.00,
  "retail2Price": 289.00
}
```

### **6. –ù–∞—Å—Ç—Ä–æ–π–∫–∏**

```javascript
GET /api/settings

{
  "wholesaleMarkup": 10,
  "retail1Markup": 40,
  "retail2Markup": 70,
  "laborCostPercent": 10,
  "overheadPercent": 5,
  "companyName": "Sazhenko Bakery"
}

PUT /api/settings
{
  "wholesaleMarkup": 15,  // –£–≤–µ–ª–∏—á–∏–ª–∏ –Ω–∞—Ü–µ–Ω–∫—É
  "retail1Markup": 45
}
```

---

## üî• Workflow –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–î–µ–Ω—å 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã**

```
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Ü–µ–Ω–∫–∏ –∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ
2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å —Å—ã—Ä—å—ë (–º—É–∫–∞, —Å–∞—Ö–∞—Ä, –º–∞—Å–ª–æ)
3. –ó–∞–∫—É–ø–∫–∏ ‚Üí –ó–∞–∫—É–ø–∏—Ç—å —Å—ã—Ä—å—ë (—Ü–µ–Ω—ã –ø–æ–ø–∞–¥—É—Ç –Ω–∞ —Å–∫–ª–∞–¥)
```

### **–î–µ–Ω—å 2: –ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã**

```
4. –†–µ—Ü–µ–ø—Ç—ã ‚Üí –°–æ–∑–¥–∞—Ç—å "–¢–µ—Å—Ç–æ –ø–µ—Å–æ—á–Ω–æ–µ" (–º—É–∫–∞+—Å–∞—Ö–∞—Ä+–º–∞—Å–ª–æ)
   ‚Üí –°–∏—Å—Ç–µ–º–∞ —Å—á–∏—Ç–∞–µ—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å 1 –∫–≥ —Ç–µ—Å—Ç–∞

5. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Üí –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç "–¢–µ—Å—Ç–æ –ø–µ—Å–æ—á–Ω–æ–µ" type=SEMI_OWN
   ‚Üí –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ —Ä–µ—Ü–µ–ø—Ç—É —Ç–µ—Å—Ç–∞
```

### **–î–µ–Ω—å 3: –¢–æ–≤–∞—Ä—ã**

```
6. –†–µ—Ü–µ–ø—Ç—ã ‚Üí –°–æ–∑–¥–∞—Ç—å "–ü–µ—á–µ–Ω—å–µ –†–æ–º–∞—à–∫–∞"
   ‚Üí –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç "–¢–µ—Å—Ç–æ –ø–µ—Å–æ—á–Ω–æ–µ"
   ‚Üí –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å—á–∏—Ç–∞–µ—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å

7. –¢–æ–≤–∞—Ä—ã ‚Üí –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä "–†–æ–º–∞—à–∫–∞ 2.5 –∫–≥"
   ‚Üí –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ —Ä–µ—Ü–µ–ø—Ç—É "–ü–µ—á–µ–Ω—å–µ –†–æ–º–∞—à–∫–∞"
   ‚Üí –£–∫–∞–∑–∞—Ç—å –≤–µ—Å –∫–æ—Ä–æ–±–∫–∏ 2.5 –∫–≥
   ‚Üí –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç–∞–µ—Ç —Ü–µ–Ω—ã!
```

### **–î–µ–Ω—å 4: –ü—Ä–æ–¥–∞–∂–∏**

```
8. –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Üí –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
   ‚Üí –í—ã–±—Ä–∞—Ç—å —Ç–æ–≤–∞—Ä—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ü–µ–Ω–∞–º–∏
   ‚Üí –¶–µ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –∫–ª–∏–µ–Ω—Ç–∞ (–æ–ø—Ç/—Ä–æ–∑–Ω1/—Ä–æ–∑–Ω2)
```

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - –ù–æ–≤—ã–µ –ø–æ–ª—è

### **Component (–∏–∑–º–µ–Ω–µ–Ω–æ)**
```sql
type: ENUM('RAW', 'SEMI_OWN', 'SEMI_BOUGHT', 'PACK')
linkedRecipeId: INTEGER (–¥–ª—è SEMI_OWN)
```

### **Recipe (–∏–∑–º–µ–Ω–µ–Ω–æ)**
```sql
outputWeight: DECIMAL(10,3) DEFAULT 1.000
calculatedCost: DECIMAL(10,2) DEFAULT 0  -- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
```

### **RecipeItem (–∏–∑–º–µ–Ω–µ–Ω–æ)**
```sql
stage: VARCHAR  -- "—Ç–µ—Å—Ç–æ", "–∫—Ä–µ–º", "–≥–ª–∞–∑—É—Ä—å"
```

### **Product (–∏–∑–º–µ–Ω–µ–Ω–æ)**
```sql
recipeId: INTEGER
boxNetWeight: DECIMAL(10,3)
boxGrossWeight: DECIMAL(10,3)
calculatedCost: DECIMAL(10,2)     -- –∞–≤—Ç–æ!
wholesalePrice: DECIMAL(10,2)     -- –∞–≤—Ç–æ!
retail1Price: DECIMAL(10,2)       -- –∞–≤—Ç–æ!
retail2Price: DECIMAL(10,2)       -- –∞–≤—Ç–æ!
```

### **Settings (–Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞)**
```sql
wholesaleMarkup: DECIMAL(5,2) DEFAULT 10
retail1Markup: DECIMAL(5,2) DEFAULT 40
retail2Markup: DECIMAL(5,2) DEFAULT 70
laborCostPercent: DECIMAL(5,2) DEFAULT 10
overheadPercent: DECIMAL(5,2) DEFAULT 5
companyName: VARCHAR DEFAULT 'Sazhenko Bakery'
```

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π —Ä–µ—Ü–µ–ø—Ç (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏)**

```
–†–µ—Ü–µ–ø—Ç "–ö—Ä–µ–º –º–∞—Å–ª—è–Ω—ã–π" (–Ω–∞ 1 –∫–≥):
  - –ú–∞—Å–ª–æ 0.6 –∫–≥ √ó 85 –≥—Ä–Ω/–∫–≥ = 51 –≥—Ä–Ω
  - –°–∞—Ö–∞—Ä –ø—É–¥—Ä–∞ 0.4 –∫–≥ √ó 30 –≥—Ä–Ω/–∫–≥ = 12 –≥—Ä–Ω
  ‚Üí –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å = 63 –≥—Ä–Ω/–∫–≥
```

### **–ü—Ä–∏–º–µ—Ä 2: –í–ª–æ–∂–µ–Ω–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç**

```
–†–µ—Ü–µ–ø—Ç "–¢–æ—Ä—Ç –ù–∞–ø–æ–ª–µ–æ–Ω" (–Ω–∞ 1 –∫–≥):
  - –¢–µ—Å—Ç–æ —Å–ª–æ—ë–Ω–æ–µ 0.5 –∫–≥ √ó 48 –≥—Ä–Ω/–∫–≥ = 24 –≥—Ä–Ω  (—ç—Ç–æ SEMI_OWN ‚Üí –±–µ—Ä—ë–º –∏–∑ –µ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞)
  - –ö—Ä–µ–º –º–∞—Å–ª—è–Ω—ã–π 0.4 –∫–≥ √ó 63 –≥—Ä–Ω/–∫–≥ = 25.2 –≥—Ä–Ω (—ç—Ç–æ SEMI_OWN ‚Üí –±–µ—Ä—ë–º –∏–∑ –µ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞)
  - –ì–ª–∞–∑—É—Ä—å 0.1 –∫–≥ √ó 95 –≥—Ä–Ω/–∫–≥ = 9.5 –≥—Ä–Ω
  ‚Üí –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å = 58.7 –≥—Ä–Ω/–∫–≥
```

### **–ü—Ä–∏–º–µ—Ä 3: –¢–æ–≤–∞—Ä —Å –∞–≤—Ç–æ—Ü–µ–Ω–∞–º–∏**

```
–¢–æ–≤–∞—Ä "–¢–æ—Ä—Ç –ù–∞–ø–æ–ª–µ–æ–Ω 1.5 –∫–≥":
  - –†–µ—Ü–µ–ø—Ç: "–¢–æ—Ä—Ç –ù–∞–ø–æ–ª–µ–æ–Ω" (58.7 –≥—Ä–Ω/–∫–≥)
  - –ù–µ—Ç—Ç–æ: 1.5 –∫–≥
  - –ë–∞–∑–æ–≤–∞—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: 58.7 √ó 1.5 = 88.05 –≥—Ä–Ω
  - –° –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ (10%+5%): 88.05 √ó 1.15 = 101.26 –≥—Ä–Ω
  - –¶–µ–Ω—ã:
    - –û–ø—Ç (+10%): 111.39 –≥—Ä–Ω
    - –†–æ–∑–Ω1 (+40%): 141.76 –≥—Ä–Ω
    - –†–æ–∑–Ω2 (+70%): 172.14 –≥—Ä–Ω
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ç—á–∞:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API
curl http://localhost:3000/api/settings

# 2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
curl -X POST http://localhost:3000/api/components \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name":"–ú—É–∫–∞","type":"RAW","unit":"–∫–≥"}'

# 3. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–∫—É–ø–∫—É (—Ü–µ–Ω–∞ –ø–æ–ø–∞–¥—ë—Ç –Ω–∞ —Å–∫–ª–∞–¥)
curl -X POST http://localhost:3000/api/purchases \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"componentId":1,"qty":100,"pricePerUnit":25,"supplierId":1}'

# 4. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ—Ü–µ–ø—Ç (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)
curl -X POST http://localhost:3000/api/recipes \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name":"–¢–µ—Å—Ç–æ","items":[{"componentId":1,"weight":1}]}'

# 5. –ü–æ–ª—É—á–∏—Ç–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å
curl http://localhost:3000/api/recipes/1/cost \
  -H "Authorization: Bearer YOUR_TOKEN"
```

---

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
   - –°—Ç–∞—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—Ç type='RAW'
   - –°—Ç–∞—Ä—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –ø–æ–ª—É—á–∞—Ç outputWeight=1.000
   - –°—Ç–∞—Ä—ã–µ —Ç–æ–≤–∞—Ä—ã –ø–æ–ª—É—á–∞—Ç calculatedCost=0 (–Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å)

2. **–ü–µ—Ä–µ—Å—á—ë—Ç —Ü–µ–Ω:**
   - –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ü–µ–Ω—ã –ù–ï –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ù—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å POST /api/products/:id/recalculate –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
   - –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä

3. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏:**
   - –ó–∞—â–∏—Ç–∞ –æ—Ç —Ü–∏–∫–ª–æ–≤ –≤ —Ä–µ—Ü–µ–ø—Ç–∞—Ö
   - –ï—Å–ª–∏ —Ä–µ—Ü–µ–ø—Ç A –∏—Å–ø–æ–ª—å–∑—É–µ—Ç B, –∞ B –∏—Å–ø–æ–ª—å–∑—É–µ—Ç A ‚Üí –≤–µ—Ä–Ω—ë—Ç 0

4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –†–∞—Å—á—ë—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–ª–≥–∏–º –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
   - –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –≤ calculatedCost
   - –ü–µ—Ä–µ—Å—á—ë—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–µ—Ü–µ–ø—Ç–∞

---

## üìã TODO (–≤ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–∞—Ç—á–∞—Ö)

- ‚è≥ PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–ø—Ä–∞–π—Å—ã, –∑–∞–∫–∞–∑—ã, –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –ª–∏—Å—Ç—ã)
- ‚è≥ –°–ø–∏—Å–∞–Ω–∏–µ —Å–æ —Å–∫–ª–∞–¥–∞ –ø—Ä–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ
- ‚è≥ –ü–∞–∫–µ—Ç–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚è≥ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏
- ‚è≥ –û—Ç—á—ë—Ç—ã –ø–æ —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏

---

**v4.2 - –º–æ—â–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–∞!** üöÄ
